{"ast":null,"code":"/**\r\n * Global error handler for uncaught exceptions and promise rejections\r\n */\n\nimport { formatError } from \"./errorHandler\";\n\n// Store the toast function for use in the global handlers\nlet showErrorToast = null;\n\n/**\r\n * Initialize the global error handler with a toast function\r\n * @param errorToastFn Function to show error toasts\r\n */\nexport const initGlobalErrorHandler = errorToastFn => {\n  showErrorToast = errorToastFn;\n\n  // Set up global error handlers\n  setupGlobalHandlers();\n};\n\n/**\r\n * Set up global error handlers for uncaught exceptions and unhandled promise rejections\r\n */\nconst setupGlobalHandlers = () => {\n  // Handle uncaught exceptions\n  window.addEventListener(\"error\", event => {\n    handleGlobalError(event.error || new Error(event.message));\n    // Don't prevent default to allow browser's default error handling\n  });\n\n  // Handle unhandled promise rejections\n  window.addEventListener(\"unhandledrejection\", event => {\n    handleGlobalError(event.reason);\n    // Don't prevent default to allow browser's default error handling\n  });\n};\n\n/**\r\n * Handle a global error by logging it and showing a toast if possible\r\n * @param error The error that occurred\r\n */\nconst handleGlobalError = error => {\n  const formattedError = formatError(error);\n\n  // Log the error to console\n  console.error(\"Uncaught error:\", formattedError);\n\n  // Show toast notification if available\n  if (showErrorToast) {\n    showErrorToast(formattedError);\n  }\n\n  // You could also send the error to a monitoring service like Sentry here\n  // if (typeof Sentry !== 'undefined') {\n  //   Sentry.captureException(error);\n  // }\n};\nexport default initGlobalErrorHandler;","map":{"version":3,"names":["formatError","showErrorToast","initGlobalErrorHandler","errorToastFn","setupGlobalHandlers","window","addEventListener","event","handleGlobalError","error","Error","message","reason","formattedError","console"],"sources":["C:/Users/amana/Desktop/s/frontend/src/utils/globalErrorHandler.ts"],"sourcesContent":["/**\r\n * Global error handler for uncaught exceptions and promise rejections\r\n */\r\n\r\nimport { formatError } from \"./errorHandler\";\r\n\r\n// Store the toast function for use in the global handlers\r\nlet showErrorToast: ((error: any) => void) | null = null;\r\n\r\n/**\r\n * Initialize the global error handler with a toast function\r\n * @param errorToastFn Function to show error toasts\r\n */\r\nexport const initGlobalErrorHandler = (errorToastFn: (error: any) => void) => {\r\n  showErrorToast = errorToastFn;\r\n\r\n  // Set up global error handlers\r\n  setupGlobalHandlers();\r\n};\r\n\r\n/**\r\n * Set up global error handlers for uncaught exceptions and unhandled promise rejections\r\n */\r\nconst setupGlobalHandlers = () => {\r\n  // Handle uncaught exceptions\r\n  window.addEventListener(\"error\", (event) => {\r\n    handleGlobalError(event.error || new Error(event.message));\r\n    // Don't prevent default to allow browser's default error handling\r\n  });\r\n\r\n  // Handle unhandled promise rejections\r\n  window.addEventListener(\"unhandledrejection\", (event) => {\r\n    handleGlobalError(event.reason);\r\n    // Don't prevent default to allow browser's default error handling\r\n  });\r\n};\r\n\r\n/**\r\n * Handle a global error by logging it and showing a toast if possible\r\n * @param error The error that occurred\r\n */\r\nconst handleGlobalError = (error: any) => {\r\n  const formattedError = formatError(error);\r\n\r\n  // Log the error to console\r\n  console.error(\"Uncaught error:\", formattedError);\r\n\r\n  // Show toast notification if available\r\n  if (showErrorToast) {\r\n    showErrorToast(formattedError);\r\n  }\r\n\r\n  // You could also send the error to a monitoring service like Sentry here\r\n  // if (typeof Sentry !== 'undefined') {\r\n  //   Sentry.captureException(error);\r\n  // }\r\n};\r\n\r\nexport default initGlobalErrorHandler;\r\n"],"mappings":"AAAA;AACA;AACA;;AAEA,SAASA,WAAW,QAAQ,gBAAgB;;AAE5C;AACA,IAAIC,cAA6C,GAAG,IAAI;;AAExD;AACA;AACA;AACA;AACA,OAAO,MAAMC,sBAAsB,GAAIC,YAAkC,IAAK;EAC5EF,cAAc,GAAGE,YAAY;;EAE7B;EACAC,mBAAmB,CAAC,CAAC;AACvB,CAAC;;AAED;AACA;AACA;AACA,MAAMA,mBAAmB,GAAGA,CAAA,KAAM;EAChC;EACAC,MAAM,CAACC,gBAAgB,CAAC,OAAO,EAAGC,KAAK,IAAK;IAC1CC,iBAAiB,CAACD,KAAK,CAACE,KAAK,IAAI,IAAIC,KAAK,CAACH,KAAK,CAACI,OAAO,CAAC,CAAC;IAC1D;EACF,CAAC,CAAC;;EAEF;EACAN,MAAM,CAACC,gBAAgB,CAAC,oBAAoB,EAAGC,KAAK,IAAK;IACvDC,iBAAiB,CAACD,KAAK,CAACK,MAAM,CAAC;IAC/B;EACF,CAAC,CAAC;AACJ,CAAC;;AAED;AACA;AACA;AACA;AACA,MAAMJ,iBAAiB,GAAIC,KAAU,IAAK;EACxC,MAAMI,cAAc,GAAGb,WAAW,CAACS,KAAK,CAAC;;EAEzC;EACAK,OAAO,CAACL,KAAK,CAAC,iBAAiB,EAAEI,cAAc,CAAC;;EAEhD;EACA,IAAIZ,cAAc,EAAE;IAClBA,cAAc,CAACY,cAAc,CAAC;EAChC;;EAEA;EACA;EACA;EACA;AACF,CAAC;AAED,eAAeX,sBAAsB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}