{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\amana\\\\Desktop\\\\s\\\\frontend\\\\src\\\\pages\\\\AssetDetailPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useAsset, useDeleteAsset } from \"../hooks/useAssets\";\nimport AssetDetail from \"../components/AssetDetail\";\nimport ConfirmDialog from \"../components/ConfirmDialog\";\nimport LoadingIndicator from \"../components/LoadingIndicator\";\nimport ErrorDisplay from \"../components/ErrorDisplay\";\nimport { useToast } from \"../contexts/ToastContext\";\nimport \"./AssetDetailPage.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AssetDetailPage = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    showSuccess,\n    showError\n  } = useToast();\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\n\n  // Convert id to number, handle invalid id\n  const assetId = id ? parseInt(id, 10) : 0;\n  const isValidId = !isNaN(assetId) && assetId > 0;\n  const {\n    asset,\n    loading,\n    error,\n    refetch\n  } = useAsset(isValidId ? assetId : 0);\n  const {\n    deleteAsset,\n    loading: deleteLoading,\n    error: deleteError\n  } = useDeleteAsset();\n\n  // Show error toast if delete fails\n  useEffect(() => {\n    if (deleteError) {\n      showError(deleteError);\n    }\n  }, [deleteError, showError]);\n\n  // Handle invalid ID\n  if (!isValidId) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"asset-detail-container\",\n      children: /*#__PURE__*/_jsxDEV(ErrorDisplay, {\n        title: \"Invalid Asset ID\",\n        message: \"The asset ID provided is not valid.\",\n        onBack: () => navigate(\"/assets\"),\n        backText: \"Back to Assets\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Handle loading state\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"asset-detail-container\",\n      children: /*#__PURE__*/_jsxDEV(LoadingIndicator, {\n        text: \"Loading asset information...\",\n        size: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Handle error state (including 404)\n  if (error || !asset) {\n    const isNotFound = (error === null || error === void 0 ? void 0 : error.includes(\"404\")) || (error === null || error === void 0 ? void 0 : error.includes(\"not found\")) || !asset;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"asset-detail-container\",\n      children: /*#__PURE__*/_jsxDEV(ErrorDisplay, {\n        title: isNotFound ? \"Asset Not Found\" : \"Error Loading Asset\",\n        message: isNotFound ? `The asset with ID ${assetId} could not be found. It may have been deleted or the ID may be incorrect.` : error || \"An unexpected error occurred while loading the asset.\",\n        onBack: () => navigate(\"/assets\"),\n        backText: \"Back to Assets\",\n        onRetry: !isNotFound ? refetch : undefined,\n        retryText: \"Try Again\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Handle edit action\n  const handleEdit = () => {\n    navigate(`/assets/${assetId}/edit`);\n  };\n\n  // Handle delete action\n  const handleDelete = () => {\n    setShowDeleteDialog(true);\n  };\n\n  // Handle delete confirmation\n  const handleConfirmDelete = async () => {\n    try {\n      const success = await deleteAsset(assetId);\n      if (success) {\n        // Show success toast notification\n        showSuccess(`Asset \"${asset.name}\" has been successfully deleted.`);\n        // Navigate back to the asset list\n        navigate(\"/assets\");\n      } else {\n        setShowDeleteDialog(false);\n        // Show generic error if no specific error was caught\n        if (!deleteError) {\n          showError(\"Failed to delete asset due to an unknown error.\");\n        }\n      }\n    } catch (err) {\n      setShowDeleteDialog(false);\n      showError(err);\n    }\n  };\n\n  // Handle delete cancellation\n  const handleCancelDelete = () => {\n    setShowDeleteDialog(false);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(AssetDetail, {\n      asset: asset,\n      onEdit: handleEdit,\n      onDelete: handleDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ConfirmDialog, {\n      isOpen: showDeleteDialog,\n      title: \"Delete Asset\",\n      message: `Are you sure you want to delete \"${asset.name}\"? This action cannot be undone.`,\n      confirmText: deleteLoading ? \"Deleting...\" : \"Delete\",\n      cancelText: \"Cancel\",\n      onConfirm: handleConfirmDelete,\n      onCancel: handleCancelDelete,\n      isDestructive: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(AssetDetailPage, \"nk3xV1RrmXLNa1oN277QaddTzmI=\", false, function () {\n  return [useParams, useNavigate, useToast, useAsset, useDeleteAsset];\n});\n_c = AssetDetailPage;\nexport default AssetDetailPage;\nvar _c;\n$RefreshReg$(_c, \"AssetDetailPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useAsset","useDeleteAsset","AssetDetail","ConfirmDialog","LoadingIndicator","ErrorDisplay","useToast","jsxDEV","_jsxDEV","Fragment","_Fragment","AssetDetailPage","_s","id","navigate","showSuccess","showError","showDeleteDialog","setShowDeleteDialog","assetId","parseInt","isValidId","isNaN","asset","loading","error","refetch","deleteAsset","deleteLoading","deleteError","className","children","title","message","onBack","backText","fileName","_jsxFileName","lineNumber","columnNumber","text","size","isNotFound","includes","onRetry","undefined","retryText","handleEdit","handleDelete","handleConfirmDelete","success","name","err","handleCancelDelete","onEdit","onDelete","isOpen","confirmText","cancelText","onConfirm","onCancel","isDestructive","_c","$RefreshReg$"],"sources":["C:/Users/amana/Desktop/s/frontend/src/pages/AssetDetailPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { useAsset, useDeleteAsset } from \"../hooks/useAssets\";\r\nimport AssetDetail from \"../components/AssetDetail\";\r\nimport ConfirmDialog from \"../components/ConfirmDialog\";\r\nimport LoadingIndicator from \"../components/LoadingIndicator\";\r\nimport ErrorDisplay from \"../components/ErrorDisplay\";\r\nimport { useToast } from \"../contexts/ToastContext\";\r\nimport \"./AssetDetailPage.css\";\r\n\r\nconst AssetDetailPage: React.FC = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const navigate = useNavigate();\r\n  const { showSuccess, showError } = useToast();\r\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\r\n\r\n  // Convert id to number, handle invalid id\r\n  const assetId = id ? parseInt(id, 10) : 0;\r\n  const isValidId = !isNaN(assetId) && assetId > 0;\r\n\r\n  const { asset, loading, error, refetch } = useAsset(isValidId ? assetId : 0);\r\n  const {\r\n    deleteAsset,\r\n    loading: deleteLoading,\r\n    error: deleteError,\r\n  } = useDeleteAsset();\r\n\r\n  // Show error toast if delete fails\r\n  useEffect(() => {\r\n    if (deleteError) {\r\n      showError(deleteError);\r\n    }\r\n  }, [deleteError, showError]);\r\n\r\n  // Handle invalid ID\r\n  if (!isValidId) {\r\n    return (\r\n      <div className=\"asset-detail-container\">\r\n        <ErrorDisplay\r\n          title=\"Invalid Asset ID\"\r\n          message=\"The asset ID provided is not valid.\"\r\n          onBack={() => navigate(\"/assets\")}\r\n          backText=\"Back to Assets\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Handle loading state\r\n  if (loading) {\r\n    return (\r\n      <div className=\"asset-detail-container\">\r\n        <LoadingIndicator text=\"Loading asset information...\" size=\"large\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Handle error state (including 404)\r\n  if (error || !asset) {\r\n    const isNotFound =\r\n      error?.includes(\"404\") || error?.includes(\"not found\") || !asset;\r\n\r\n    return (\r\n      <div className=\"asset-detail-container\">\r\n        <ErrorDisplay\r\n          title={isNotFound ? \"Asset Not Found\" : \"Error Loading Asset\"}\r\n          message={\r\n            isNotFound\r\n              ? `The asset with ID ${assetId} could not be found. It may have been deleted or the ID may be incorrect.`\r\n              : error || \"An unexpected error occurred while loading the asset.\"\r\n          }\r\n          onBack={() => navigate(\"/assets\")}\r\n          backText=\"Back to Assets\"\r\n          onRetry={!isNotFound ? refetch : undefined}\r\n          retryText=\"Try Again\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Handle edit action\r\n  const handleEdit = () => {\r\n    navigate(`/assets/${assetId}/edit`);\r\n  };\r\n\r\n  // Handle delete action\r\n  const handleDelete = () => {\r\n    setShowDeleteDialog(true);\r\n  };\r\n\r\n  // Handle delete confirmation\r\n  const handleConfirmDelete = async () => {\r\n    try {\r\n      const success = await deleteAsset(assetId);\r\n      if (success) {\r\n        // Show success toast notification\r\n        showSuccess(`Asset \"${asset.name}\" has been successfully deleted.`);\r\n        // Navigate back to the asset list\r\n        navigate(\"/assets\");\r\n      } else {\r\n        setShowDeleteDialog(false);\r\n        // Show generic error if no specific error was caught\r\n        if (!deleteError) {\r\n          showError(\"Failed to delete asset due to an unknown error.\");\r\n        }\r\n      }\r\n    } catch (err) {\r\n      setShowDeleteDialog(false);\r\n      showError(err);\r\n    }\r\n  };\r\n\r\n  // Handle delete cancellation\r\n  const handleCancelDelete = () => {\r\n    setShowDeleteDialog(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <AssetDetail asset={asset} onEdit={handleEdit} onDelete={handleDelete} />\r\n\r\n      <ConfirmDialog\r\n        isOpen={showDeleteDialog}\r\n        title=\"Delete Asset\"\r\n        message={`Are you sure you want to delete \"${asset.name}\"? This action cannot be undone.`}\r\n        confirmText={deleteLoading ? \"Deleting...\" : \"Delete\"}\r\n        cancelText=\"Cancel\"\r\n        onConfirm={handleConfirmDelete}\r\n        onCancel={handleCancelDelete}\r\n        isDestructive={true}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AssetDetailPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}