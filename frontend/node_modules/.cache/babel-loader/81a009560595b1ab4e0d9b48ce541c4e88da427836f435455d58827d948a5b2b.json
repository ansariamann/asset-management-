{"ast":null,"code":"/**\r\n * Formats an error from any source into a consistent ApiError object\r\n */\nexport const formatError = error => {\n  // Handle Axios errors\n  if (isAxiosError(error)) {\n    var _error$response, _error$response2;\n    const status = (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status;\n    const responseData = (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data;\n\n    // Handle structured API errors\n    if (responseData && typeof responseData === \"object\" && responseData.error) {\n      return {\n        message: responseData.error.message || \"An error occurred\",\n        code: responseData.error.code || `HTTP_${status}`,\n        status,\n        details: responseData.error.details\n      };\n    }\n\n    // Handle plain text API errors\n    if (responseData && typeof responseData === \"string\") {\n      return {\n        message: responseData,\n        code: `HTTP_${status}`,\n        status\n      };\n    }\n\n    // Handle network errors\n    if (error.message === \"Network Error\") {\n      return {\n        message: \"Unable to connect to the server. Please check your internet connection.\",\n        code: \"NETWORK_ERROR\"\n      };\n    }\n\n    // Default Axios error\n    return {\n      message: error.message || \"An unexpected error occurred\",\n      code: `HTTP_${status || \"ERROR\"}`,\n      status\n    };\n  }\n\n  // Handle standard Error objects\n  if (error instanceof Error) {\n    return {\n      message: error.message || \"An unexpected error occurred\",\n      code: \"APP_ERROR\"\n    };\n  }\n\n  // Handle string errors\n  if (typeof error === \"string\") {\n    return {\n      message: error,\n      code: \"APP_ERROR\"\n    };\n  }\n\n  // Handle unknown errors\n  return {\n    message: \"An unexpected error occurred\",\n    code: \"UNKNOWN_ERROR\"\n  };\n};\n\n/**\r\n * Returns a user-friendly error message based on the error type and status\r\n */\nexport const getUserFriendlyErrorMessage = error => {\n  // Handle specific HTTP status codes\n  if (error.status) {\n    switch (error.status) {\n      case 400:\n        return \"The request contains invalid data. Please check your input and try again.\";\n      case 401:\n        return \"You need to be logged in to perform this action.\";\n      case 403:\n        return \"You don't have permission to perform this action.\";\n      case 404:\n        return \"The requested resource was not found.\";\n      case 409:\n        return \"This operation couldn't be completed due to a conflict with existing data.\";\n      case 422:\n        return \"The submitted data is invalid. Please check your input and try again.\";\n      case 429:\n        return \"Too many requests. Please try again later.\";\n      case 500:\n        return \"An internal server error occurred. Please try again later.\";\n      case 503:\n        return \"The service is temporarily unavailable. Please try again later.\";\n    }\n  }\n\n  // Handle specific error codes\n  if (error.code) {\n    switch (error.code) {\n      case \"NETWORK_ERROR\":\n        return \"Unable to connect to the server. Please check your internet connection.\";\n      case \"TIMEOUT_ERROR\":\n        return \"The request timed out. Please try again later.\";\n      case \"DUPLICATE_SERIAL\":\n        return \"An asset with this serial number already exists.\";\n    }\n  }\n\n  // Return the original message if we don't have a specific user-friendly message\n  return error.message;\n};\n\n/**\r\n * Type guard to check if an error is an AxiosError\r\n */\nfunction isAxiosError(error) {\n  return error && error.isAxiosError === true;\n}","map":{"version":3,"names":["formatError","error","isAxiosError","_error$response","_error$response2","status","response","responseData","data","message","code","details","Error","getUserFriendlyErrorMessage"],"sources":["C:/Users/amana/Desktop/s/frontend/src/utils/errorHandler.ts"],"sourcesContent":["import { AxiosError } from \"axios\";\r\n\r\nexport interface ApiError {\r\n  message: string;\r\n  code?: string;\r\n  status?: number;\r\n  details?: any;\r\n}\r\n\r\n/**\r\n * Formats an error from any source into a consistent ApiError object\r\n */\r\nexport const formatError = (error: unknown): ApiError => {\r\n  // Handle Axios errors\r\n  if (isAxiosError(error)) {\r\n    const status = error.response?.status;\r\n    const responseData = error.response?.data;\r\n\r\n    // Handle structured API errors\r\n    if (\r\n      responseData &&\r\n      typeof responseData === \"object\" &&\r\n      responseData.error\r\n    ) {\r\n      return {\r\n        message: responseData.error.message || \"An error occurred\",\r\n        code: responseData.error.code || `HTTP_${status}`,\r\n        status,\r\n        details: responseData.error.details,\r\n      };\r\n    }\r\n\r\n    // Handle plain text API errors\r\n    if (responseData && typeof responseData === \"string\") {\r\n      return {\r\n        message: responseData,\r\n        code: `HTTP_${status}`,\r\n        status,\r\n      };\r\n    }\r\n\r\n    // Handle network errors\r\n    if (error.message === \"Network Error\") {\r\n      return {\r\n        message:\r\n          \"Unable to connect to the server. Please check your internet connection.\",\r\n        code: \"NETWORK_ERROR\",\r\n      };\r\n    }\r\n\r\n    // Default Axios error\r\n    return {\r\n      message: error.message || \"An unexpected error occurred\",\r\n      code: `HTTP_${status || \"ERROR\"}`,\r\n      status,\r\n    };\r\n  }\r\n\r\n  // Handle standard Error objects\r\n  if (error instanceof Error) {\r\n    return {\r\n      message: error.message || \"An unexpected error occurred\",\r\n      code: \"APP_ERROR\",\r\n    };\r\n  }\r\n\r\n  // Handle string errors\r\n  if (typeof error === \"string\") {\r\n    return {\r\n      message: error,\r\n      code: \"APP_ERROR\",\r\n    };\r\n  }\r\n\r\n  // Handle unknown errors\r\n  return {\r\n    message: \"An unexpected error occurred\",\r\n    code: \"UNKNOWN_ERROR\",\r\n  };\r\n};\r\n\r\n/**\r\n * Returns a user-friendly error message based on the error type and status\r\n */\r\nexport const getUserFriendlyErrorMessage = (error: ApiError): string => {\r\n  // Handle specific HTTP status codes\r\n  if (error.status) {\r\n    switch (error.status) {\r\n      case 400:\r\n        return \"The request contains invalid data. Please check your input and try again.\";\r\n      case 401:\r\n        return \"You need to be logged in to perform this action.\";\r\n      case 403:\r\n        return \"You don't have permission to perform this action.\";\r\n      case 404:\r\n        return \"The requested resource was not found.\";\r\n      case 409:\r\n        return \"This operation couldn't be completed due to a conflict with existing data.\";\r\n      case 422:\r\n        return \"The submitted data is invalid. Please check your input and try again.\";\r\n      case 429:\r\n        return \"Too many requests. Please try again later.\";\r\n      case 500:\r\n        return \"An internal server error occurred. Please try again later.\";\r\n      case 503:\r\n        return \"The service is temporarily unavailable. Please try again later.\";\r\n    }\r\n  }\r\n\r\n  // Handle specific error codes\r\n  if (error.code) {\r\n    switch (error.code) {\r\n      case \"NETWORK_ERROR\":\r\n        return \"Unable to connect to the server. Please check your internet connection.\";\r\n      case \"TIMEOUT_ERROR\":\r\n        return \"The request timed out. Please try again later.\";\r\n      case \"DUPLICATE_SERIAL\":\r\n        return \"An asset with this serial number already exists.\";\r\n    }\r\n  }\r\n\r\n  // Return the original message if we don't have a specific user-friendly message\r\n  return error.message;\r\n};\r\n\r\n/**\r\n * Type guard to check if an error is an AxiosError\r\n */\r\nfunction isAxiosError(error: any): error is AxiosError {\r\n  return error && error.isAxiosError === true;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}