{"ast":null,"code":"import api from \"./api\";\nimport { ApiException } from \"../types\";\nexport class AssetApi {\n  /**\r\n   * Get all assets with optional filtering and pagination\r\n   */\n  static async getAssets(filters) {\n    try {\n      const params = new URLSearchParams();\n      if (filters !== null && filters !== void 0 && filters.search) {\n        params.append(\"search\", filters.search);\n      }\n      if (filters !== null && filters !== void 0 && filters.category) {\n        params.append(\"category\", filters.category);\n      }\n      if (filters !== null && filters !== void 0 && filters.status) {\n        params.append(\"status\", filters.status);\n      }\n      if (filters !== null && filters !== void 0 && filters.page) {\n        params.append(\"page\", filters.page.toString());\n      }\n      if (filters !== null && filters !== void 0 && filters.pageSize) {\n        params.append(\"page_size\", filters.pageSize.toString());\n      }\n      const queryString = params.toString();\n      const url = queryString ? `${this.BASE_PATH}?${queryString}` : this.BASE_PATH;\n      const response = await api.get(url);\n      return response.data;\n    } catch (error) {\n      throw this.handleApiError(error);\n    }\n  }\n\n  /**\r\n   * Get a specific asset by ID\r\n   */\n  static async getAsset(id) {\n    try {\n      const response = await api.get(`${this.BASE_PATH}/${id}`);\n      return response.data;\n    } catch (error) {\n      throw this.handleApiError(error);\n    }\n  }\n\n  /**\r\n   * Create a new asset\r\n   */\n  static async createAsset(asset) {\n    try {\n      const response = await api.post(this.BASE_PATH, asset);\n      return response.data;\n    } catch (error) {\n      throw this.handleApiError(error);\n    }\n  }\n\n  /**\r\n   * Update an existing asset\r\n   */\n  static async updateAsset(id, asset) {\n    try {\n      const response = await api.put(`${this.BASE_PATH}/${id}`, asset);\n      return response.data;\n    } catch (error) {\n      throw this.handleApiError(error);\n    }\n  }\n\n  /**\r\n   * Delete an asset\r\n   */\n  static async deleteAsset(id) {\n    try {\n      await api.delete(`${this.BASE_PATH}/${id}`);\n    } catch (error) {\n      throw this.handleApiError(error);\n    }\n  }\n\n  /**\r\n   * Get available asset categories\r\n   */\n  static async getCategories() {\n    try {\n      const response = await api.get(`${this.BASE_PATH}/categories`);\n      return response.data;\n    } catch (error) {\n      throw this.handleApiError(error);\n    }\n  }\n\n  /**\r\n   * Search assets by query string\r\n   */\n  static async searchAssets(query, filters) {\n    return this.getAssets({\n      ...filters,\n      search: query\n    });\n  }\n\n  /**\r\n   * Get assets by category\r\n   */\n  static async getAssetsByCategory(category, filters) {\n    return this.getAssets({\n      ...filters,\n      category\n    });\n  }\n\n  /**\r\n   * Get assets by status\r\n   */\n  static async getAssetsByStatus(status, filters) {\n    return this.getAssets({\n      ...filters,\n      status\n    });\n  }\n\n  /**\r\n   * Check if an asset exists by ID\r\n   */\n  static async assetExists(id) {\n    try {\n      await this.getAsset(id);\n      return true;\n    } catch (error) {\n      if (error instanceof ApiException && error.status === 404) {\n        return false;\n      }\n      throw error;\n    }\n  }\n\n  /**\r\n   * Validate asset data before submission\r\n   */\n  static validateAssetData(asset) {\n    var _asset$name, _asset$category, _asset$serialNumber;\n    const errors = [];\n    if (!((_asset$name = asset.name) !== null && _asset$name !== void 0 && _asset$name.trim())) {\n      errors.push(\"Asset name is required\");\n    }\n    if (!((_asset$category = asset.category) !== null && _asset$category !== void 0 && _asset$category.trim())) {\n      errors.push(\"Category is required\");\n    }\n    if (!((_asset$serialNumber = asset.serialNumber) !== null && _asset$serialNumber !== void 0 && _asset$serialNumber.trim())) {\n      errors.push(\"Serial number is required\");\n    }\n    if (!asset.purchaseDate) {\n      errors.push(\"Purchase date is required\");\n    }\n    if (asset.purchasePrice <= 0) {\n      errors.push(\"Purchase price must be greater than 0\");\n    }\n    if (!asset.status) {\n      errors.push(\"Status is required\");\n    }\n    return errors;\n  }\n\n  /**\r\n   * Handle API errors and convert them to ApiException\r\n   */\n  static handleApiError(error) {\n    if (error.response) {\n      var _data$error, _data$error2, _data$error3;\n      const {\n        status,\n        data\n      } = error.response;\n      const errorMessage = (data === null || data === void 0 ? void 0 : (_data$error = data.error) === null || _data$error === void 0 ? void 0 : _data$error.message) || (data === null || data === void 0 ? void 0 : data.detail) || \"An error occurred\";\n      const errorCode = (data === null || data === void 0 ? void 0 : (_data$error2 = data.error) === null || _data$error2 === void 0 ? void 0 : _data$error2.code) || `HTTP_${status}`;\n      const errorDetails = (data === null || data === void 0 ? void 0 : (_data$error3 = data.error) === null || _data$error3 === void 0 ? void 0 : _data$error3.details) || data;\n      return new ApiException(status, errorCode, errorMessage, errorDetails);\n    } else if (error.request) {\n      return new ApiException(0, \"NETWORK_ERROR\", \"Network error - unable to reach server\");\n    } else {\n      return new ApiException(0, \"REQUEST_ERROR\", error.message || \"Request setup error\");\n    }\n  }\n}\nAssetApi.BASE_PATH = \"/assets\";","map":{"version":3,"names":["api","ApiException","AssetApi","getAssets","filters","params","URLSearchParams","search","append","category","status","page","toString","pageSize","queryString","url","BASE_PATH","response","get","data","error","handleApiError","getAsset","id","createAsset","asset","post","updateAsset","put","deleteAsset","delete","getCategories","searchAssets","query","getAssetsByCategory","getAssetsByStatus","assetExists","validateAssetData","_asset$name","_asset$category","_asset$serialNumber","errors","name","trim","push","serialNumber","purchaseDate","purchasePrice","_data$error","_data$error2","_data$error3","errorMessage","message","detail","errorCode","code","errorDetails","details","request"],"sources":["C:/Users/amana/Desktop/s/frontend/src/services/assetApi.ts"],"sourcesContent":["import api from \"./api\";\r\nimport {\r\n  Asset,\r\n  CreateAssetRequest,\r\n  UpdateAssetRequest,\r\n  AssetListResponse,\r\n  AssetFilters,\r\n  ApiException,\r\n} from \"../types\";\r\n\r\nexport class AssetApi {\r\n  private static readonly BASE_PATH = \"/assets\";\r\n\r\n  /**\r\n   * Get all assets with optional filtering and pagination\r\n   */\r\n  static async getAssets(filters?: AssetFilters): Promise<AssetListResponse> {\r\n    try {\r\n      const params = new URLSearchParams();\r\n\r\n      if (filters?.search) {\r\n        params.append(\"search\", filters.search);\r\n      }\r\n      if (filters?.category) {\r\n        params.append(\"category\", filters.category);\r\n      }\r\n      if (filters?.status) {\r\n        params.append(\"status\", filters.status);\r\n      }\r\n      if (filters?.page) {\r\n        params.append(\"page\", filters.page.toString());\r\n      }\r\n      if (filters?.pageSize) {\r\n        params.append(\"page_size\", filters.pageSize.toString());\r\n      }\r\n\r\n      const queryString = params.toString();\r\n      const url = queryString\r\n        ? `${this.BASE_PATH}?${queryString}`\r\n        : this.BASE_PATH;\r\n\r\n      const response = await api.get<AssetListResponse>(url);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw this.handleApiError(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get a specific asset by ID\r\n   */\r\n  static async getAsset(id: number): Promise<Asset> {\r\n    try {\r\n      const response = await api.get<Asset>(`${this.BASE_PATH}/${id}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw this.handleApiError(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create a new asset\r\n   */\r\n  static async createAsset(asset: CreateAssetRequest): Promise<Asset> {\r\n    try {\r\n      const response = await api.post<Asset>(this.BASE_PATH, asset);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw this.handleApiError(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update an existing asset\r\n   */\r\n  static async updateAsset(\r\n    id: number,\r\n    asset: UpdateAssetRequest\r\n  ): Promise<Asset> {\r\n    try {\r\n      const response = await api.put<Asset>(`${this.BASE_PATH}/${id}`, asset);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw this.handleApiError(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete an asset\r\n   */\r\n  static async deleteAsset(id: number): Promise<void> {\r\n    try {\r\n      await api.delete(`${this.BASE_PATH}/${id}`);\r\n    } catch (error) {\r\n      throw this.handleApiError(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get available asset categories\r\n   */\r\n  static async getCategories(): Promise<string[]> {\r\n    try {\r\n      const response = await api.get<string[]>(`${this.BASE_PATH}/categories`);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw this.handleApiError(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Search assets by query string\r\n   */\r\n  static async searchAssets(\r\n    query: string,\r\n    filters?: Omit<AssetFilters, \"search\">\r\n  ): Promise<AssetListResponse> {\r\n    return this.getAssets({ ...filters, search: query });\r\n  }\r\n\r\n  /**\r\n   * Get assets by category\r\n   */\r\n  static async getAssetsByCategory(\r\n    category: string,\r\n    filters?: Omit<AssetFilters, \"category\">\r\n  ): Promise<AssetListResponse> {\r\n    return this.getAssets({ ...filters, category });\r\n  }\r\n\r\n  /**\r\n   * Get assets by status\r\n   */\r\n  static async getAssetsByStatus(\r\n    status: string,\r\n    filters?: Omit<AssetFilters, \"status\">\r\n  ): Promise<AssetListResponse> {\r\n    return this.getAssets({ ...filters, status });\r\n  }\r\n\r\n  /**\r\n   * Check if an asset exists by ID\r\n   */\r\n  static async assetExists(id: number): Promise<boolean> {\r\n    try {\r\n      await this.getAsset(id);\r\n      return true;\r\n    } catch (error) {\r\n      if (error instanceof ApiException && error.status === 404) {\r\n        return false;\r\n      }\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Validate asset data before submission\r\n   */\r\n  static validateAssetData(\r\n    asset: CreateAssetRequest | UpdateAssetRequest\r\n  ): string[] {\r\n    const errors: string[] = [];\r\n\r\n    if (!asset.name?.trim()) {\r\n      errors.push(\"Asset name is required\");\r\n    }\r\n    if (!asset.category?.trim()) {\r\n      errors.push(\"Category is required\");\r\n    }\r\n    if (!asset.serialNumber?.trim()) {\r\n      errors.push(\"Serial number is required\");\r\n    }\r\n    if (!asset.purchaseDate) {\r\n      errors.push(\"Purchase date is required\");\r\n    }\r\n    if (asset.purchasePrice <= 0) {\r\n      errors.push(\"Purchase price must be greater than 0\");\r\n    }\r\n    if (!asset.status) {\r\n      errors.push(\"Status is required\");\r\n    }\r\n\r\n    return errors;\r\n  }\r\n\r\n  /**\r\n   * Handle API errors and convert them to ApiException\r\n   */\r\n  private static handleApiError(error: any): ApiException {\r\n    if (error.response) {\r\n      const { status, data } = error.response;\r\n      const errorMessage =\r\n        data?.error?.message || data?.detail || \"An error occurred\";\r\n      const errorCode = data?.error?.code || `HTTP_${status}`;\r\n      const errorDetails = data?.error?.details || data;\r\n\r\n      return new ApiException(status, errorCode, errorMessage, errorDetails);\r\n    } else if (error.request) {\r\n      return new ApiException(\r\n        0,\r\n        \"NETWORK_ERROR\",\r\n        \"Network error - unable to reach server\"\r\n      );\r\n    } else {\r\n      return new ApiException(\r\n        0,\r\n        \"REQUEST_ERROR\",\r\n        error.message || \"Request setup error\"\r\n      );\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}