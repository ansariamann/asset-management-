{"ast":null,"code":"import api from\"./api\";import{ApiException}from\"../types\";export class AssetApi{/**\r\n   * Get all assets with optional filtering and pagination\r\n   */static async getAssets(filters){try{const params=new URLSearchParams();if(filters!==null&&filters!==void 0&&filters.search){params.append(\"search\",filters.search);}if(filters!==null&&filters!==void 0&&filters.category){params.append(\"category\",filters.category);}if(filters!==null&&filters!==void 0&&filters.status){params.append(\"status\",filters.status);}if(filters!==null&&filters!==void 0&&filters.page){params.append(\"page\",filters.page.toString());}if(filters!==null&&filters!==void 0&&filters.pageSize){params.append(\"page_size\",filters.pageSize.toString());}const queryString=params.toString();const url=queryString?`${this.BASE_PATH}?${queryString}`:this.BASE_PATH;const response=await api.get(url);return response.data;}catch(error){throw this.handleApiError(error);}}/**\r\n   * Get a specific asset by ID\r\n   */static async getAsset(id){try{const response=await api.get(`${this.BASE_PATH}/${id}`);return response.data;}catch(error){throw this.handleApiError(error);}}/**\r\n   * Create a new asset\r\n   */static async createAsset(asset){try{const response=await api.post(this.BASE_PATH,asset);return response.data;}catch(error){throw this.handleApiError(error);}}/**\r\n   * Update an existing asset\r\n   */static async updateAsset(id,asset){try{const response=await api.put(`${this.BASE_PATH}/${id}`,asset);return response.data;}catch(error){throw this.handleApiError(error);}}/**\r\n   * Delete an asset\r\n   */static async deleteAsset(id){try{await api.delete(`${this.BASE_PATH}/${id}`);}catch(error){throw this.handleApiError(error);}}/**\r\n   * Get available asset categories\r\n   */static async getCategories(){try{const response=await api.get(`${this.BASE_PATH}/categories`);return response.data;}catch(error){throw this.handleApiError(error);}}/**\r\n   * Search assets by query string\r\n   */static async searchAssets(query,filters){return this.getAssets({...filters,search:query});}/**\r\n   * Get assets by category\r\n   */static async getAssetsByCategory(category,filters){return this.getAssets({...filters,category});}/**\r\n   * Get assets by status\r\n   */static async getAssetsByStatus(status,filters){return this.getAssets({...filters,status});}/**\r\n   * Check if an asset exists by ID\r\n   */static async assetExists(id){try{await this.getAsset(id);return true;}catch(error){if(error instanceof ApiException&&error.status===404){return false;}throw error;}}/**\r\n   * Validate asset data before submission\r\n   */static validateAssetData(asset){var _asset$name,_asset$category,_asset$serialNumber;const errors=[];if(!((_asset$name=asset.name)!==null&&_asset$name!==void 0&&_asset$name.trim())){errors.push(\"Asset name is required\");}if(!((_asset$category=asset.category)!==null&&_asset$category!==void 0&&_asset$category.trim())){errors.push(\"Category is required\");}if(!((_asset$serialNumber=asset.serialNumber)!==null&&_asset$serialNumber!==void 0&&_asset$serialNumber.trim())){errors.push(\"Serial number is required\");}if(!asset.purchaseDate){errors.push(\"Purchase date is required\");}if(asset.purchasePrice<=0){errors.push(\"Purchase price must be greater than 0\");}if(!asset.status){errors.push(\"Status is required\");}return errors;}/**\r\n   * Handle API errors and convert them to ApiException\r\n   */static handleApiError(error){if(error.response){var _data$error,_data$error2,_data$error3;const{status,data}=error.response;const errorMessage=(data===null||data===void 0?void 0:(_data$error=data.error)===null||_data$error===void 0?void 0:_data$error.message)||(data===null||data===void 0?void 0:data.detail)||\"An error occurred\";const errorCode=(data===null||data===void 0?void 0:(_data$error2=data.error)===null||_data$error2===void 0?void 0:_data$error2.code)||`HTTP_${status}`;const errorDetails=(data===null||data===void 0?void 0:(_data$error3=data.error)===null||_data$error3===void 0?void 0:_data$error3.details)||data;return new ApiException(status,errorCode,errorMessage,errorDetails);}else if(error.request){return new ApiException(0,\"NETWORK_ERROR\",\"Network error - unable to reach server\");}else{return new ApiException(0,\"REQUEST_ERROR\",error.message||\"Request setup error\");}}}AssetApi.BASE_PATH=\"/assets\";","map":{"version":3,"names":["api","ApiException","AssetApi","getAssets","filters","params","URLSearchParams","search","append","category","status","page","toString","pageSize","queryString","url","BASE_PATH","response","get","data","error","handleApiError","getAsset","id","createAsset","asset","post","updateAsset","put","deleteAsset","delete","getCategories","searchAssets","query","getAssetsByCategory","getAssetsByStatus","assetExists","validateAssetData","_asset$name","_asset$category","_asset$serialNumber","errors","name","trim","push","serialNumber","purchaseDate","purchasePrice","_data$error","_data$error2","_data$error3","errorMessage","message","detail","errorCode","code","errorDetails","details","request"],"sources":["C:/Users/amana/Desktop/s/frontend/src/services/assetApi.ts"],"sourcesContent":["import api from \"./api\";\r\nimport {\r\n  Asset,\r\n  CreateAssetRequest,\r\n  UpdateAssetRequest,\r\n  AssetListResponse,\r\n  AssetFilters,\r\n  ApiException,\r\n} from \"../types\";\r\n\r\nexport class AssetApi {\r\n  private static readonly BASE_PATH = \"/assets\";\r\n\r\n  /**\r\n   * Get all assets with optional filtering and pagination\r\n   */\r\n  static async getAssets(filters?: AssetFilters): Promise<AssetListResponse> {\r\n    try {\r\n      const params = new URLSearchParams();\r\n\r\n      if (filters?.search) {\r\n        params.append(\"search\", filters.search);\r\n      }\r\n      if (filters?.category) {\r\n        params.append(\"category\", filters.category);\r\n      }\r\n      if (filters?.status) {\r\n        params.append(\"status\", filters.status);\r\n      }\r\n      if (filters?.page) {\r\n        params.append(\"page\", filters.page.toString());\r\n      }\r\n      if (filters?.pageSize) {\r\n        params.append(\"page_size\", filters.pageSize.toString());\r\n      }\r\n\r\n      const queryString = params.toString();\r\n      const url = queryString\r\n        ? `${this.BASE_PATH}?${queryString}`\r\n        : this.BASE_PATH;\r\n\r\n      const response = await api.get<AssetListResponse>(url);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw this.handleApiError(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get a specific asset by ID\r\n   */\r\n  static async getAsset(id: number): Promise<Asset> {\r\n    try {\r\n      const response = await api.get<Asset>(`${this.BASE_PATH}/${id}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw this.handleApiError(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create a new asset\r\n   */\r\n  static async createAsset(asset: CreateAssetRequest): Promise<Asset> {\r\n    try {\r\n      const response = await api.post<Asset>(this.BASE_PATH, asset);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw this.handleApiError(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update an existing asset\r\n   */\r\n  static async updateAsset(\r\n    id: number,\r\n    asset: UpdateAssetRequest\r\n  ): Promise<Asset> {\r\n    try {\r\n      const response = await api.put<Asset>(`${this.BASE_PATH}/${id}`, asset);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw this.handleApiError(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete an asset\r\n   */\r\n  static async deleteAsset(id: number): Promise<void> {\r\n    try {\r\n      await api.delete(`${this.BASE_PATH}/${id}`);\r\n    } catch (error) {\r\n      throw this.handleApiError(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get available asset categories\r\n   */\r\n  static async getCategories(): Promise<string[]> {\r\n    try {\r\n      const response = await api.get<string[]>(`${this.BASE_PATH}/categories`);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw this.handleApiError(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Search assets by query string\r\n   */\r\n  static async searchAssets(\r\n    query: string,\r\n    filters?: Omit<AssetFilters, \"search\">\r\n  ): Promise<AssetListResponse> {\r\n    return this.getAssets({ ...filters, search: query });\r\n  }\r\n\r\n  /**\r\n   * Get assets by category\r\n   */\r\n  static async getAssetsByCategory(\r\n    category: string,\r\n    filters?: Omit<AssetFilters, \"category\">\r\n  ): Promise<AssetListResponse> {\r\n    return this.getAssets({ ...filters, category });\r\n  }\r\n\r\n  /**\r\n   * Get assets by status\r\n   */\r\n  static async getAssetsByStatus(\r\n    status: string,\r\n    filters?: Omit<AssetFilters, \"status\">\r\n  ): Promise<AssetListResponse> {\r\n    return this.getAssets({ ...filters, status });\r\n  }\r\n\r\n  /**\r\n   * Check if an asset exists by ID\r\n   */\r\n  static async assetExists(id: number): Promise<boolean> {\r\n    try {\r\n      await this.getAsset(id);\r\n      return true;\r\n    } catch (error) {\r\n      if (error instanceof ApiException && error.status === 404) {\r\n        return false;\r\n      }\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Validate asset data before submission\r\n   */\r\n  static validateAssetData(\r\n    asset: CreateAssetRequest | UpdateAssetRequest\r\n  ): string[] {\r\n    const errors: string[] = [];\r\n\r\n    if (!asset.name?.trim()) {\r\n      errors.push(\"Asset name is required\");\r\n    }\r\n    if (!asset.category?.trim()) {\r\n      errors.push(\"Category is required\");\r\n    }\r\n    if (!asset.serialNumber?.trim()) {\r\n      errors.push(\"Serial number is required\");\r\n    }\r\n    if (!asset.purchaseDate) {\r\n      errors.push(\"Purchase date is required\");\r\n    }\r\n    if (asset.purchasePrice <= 0) {\r\n      errors.push(\"Purchase price must be greater than 0\");\r\n    }\r\n    if (!asset.status) {\r\n      errors.push(\"Status is required\");\r\n    }\r\n\r\n    return errors;\r\n  }\r\n\r\n  /**\r\n   * Handle API errors and convert them to ApiException\r\n   */\r\n  private static handleApiError(error: any): ApiException {\r\n    if (error.response) {\r\n      const { status, data } = error.response;\r\n      const errorMessage =\r\n        data?.error?.message || data?.detail || \"An error occurred\";\r\n      const errorCode = data?.error?.code || `HTTP_${status}`;\r\n      const errorDetails = data?.error?.details || data;\r\n\r\n      return new ApiException(status, errorCode, errorMessage, errorDetails);\r\n    } else if (error.request) {\r\n      return new ApiException(\r\n        0,\r\n        \"NETWORK_ERROR\",\r\n        \"Network error - unable to reach server\"\r\n      );\r\n    } else {\r\n      return new ApiException(\r\n        0,\r\n        \"REQUEST_ERROR\",\r\n        error.message || \"Request setup error\"\r\n      );\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}